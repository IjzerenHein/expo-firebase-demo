{"version":3,"file":"FirebaseApp.js","sourceRoot":"","sources":["../src/FirebaseApp.ts"],"names":[],"mappings":"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","sourcesContent":["import { UnavailabilityError } from '@unimodules/core';\nimport ExpoFirebaseApp from './ExpoFirebaseApp';\nimport { FirebaseOptions, FirebaseModuleName } from './FirebaseApp.types';\nimport * as FirebaseModules from './FirebaseModules';\nexport { FirebaseOptions } from './FirebaseApp.types';\nexport { auth } from './FirebaseModules';\nexport * from './GoogleServices';\n\nexport const { DEFAULT_NAME, DEFAULT_OPTIONS } = ExpoFirebaseApp;\n\ninterface FirebaseAppConfig {\n  name: string;\n  options: FirebaseOptions;\n}\n\nclass FirebaseApp {\n  /**\n   * The (read-only) options for this app.\n   */\n  public name: string;\n\n  /**\n   * The (read-only) options for this app.\n   */\n  public readonly options: FirebaseOptions;\n\n  constructor(config: FirebaseAppConfig) {\n    this.name = config.name;\n    this.options = config.options;\n  }\n\n  /**\n   * Delete the Firebase app instance.\n   */\n  deleteAsync(): Promise<void> {\n    // @ts-ignore\n    if (!ExpoFirebaseApp.deleteAppAsync) {\n      throw new UnavailabilityError('expo-firebase-app', 'deleteAppAsync');\n    }\n    // @ts-ignore\n    return ExpoFirebaseApp.deleteAppAsync(this._name);\n  }\n\n  private getModuleInstance(name: FirebaseModuleName): any {\n    const mod = FirebaseModules.getModule(name);\n    if (!mod) throw new Error(`Firebase module not available: ${name}`);\n    return mod(this.name);\n  }\n\n  /*analytics(): FirebaseTypes.FirebaseAnalytics {\n    return this.getModule(\"analytics\", analytics);\n  }*/\n\n  /**\n   * Gets the Auth service for the current app.\n   */\n  auth(): FirebaseModules.Auth {\n    return this.getModuleInstance('auth');\n  }\n\n  /*database(): FirebaseTypes.FirebaseDatabase {\n    return this.getModule(\"database\", database);\n  }\n\n  firestore(): FirebaseTypes.FirebaseFirestore {\n    return this.getModule(\"firestore\", firestore);\n  }\n\n  functions(): FirebaseTypes.FirebaseFunctions {\n    return this.getModule(\"functions\", functions);\n  }\n\n  messaging(): FirebaseTypes.FirebaseMessaging {\n    return this.getModule(\"messaging\", messaging);\n  }\n\n  performance(): FirebaseTypes.FirebasePerformance {\n    return this.getModule(\"performance\", performance);\n  }\n\n  remoteConfig(): FirebaseTypes.FirebaseRemoteConfig {\n    return this.getModule(\"remoteConfig\", remoteConfig);\n  }\n\n  storage(): FirebaseTypes.FirebaseStorage {\n    return this.getModule(\"storage\", storage);\n  }*/\n}\n\nconst defaultApp = new FirebaseApp({\n  name: DEFAULT_NAME,\n  options: DEFAULT_OPTIONS,\n});\n\n/**\n * Retrieves the default Firebase app instance.\n *\n * Unlike the Firebase JavaScript SDK, it is not possible to access\n * custom named apps using this function. If you want to initialize and\n * use custom named apps, use `initializeAppAsync` and `getAppAsync`.\n */\nexport function app(): FirebaseApp {\n  return defaultApp;\n}\n\n/**\n * Initializes a Firebase app.\n *\n * On iOS and Android this method is optional, as the default Firebase app instance\n * is automatically initialized when the `GoogleService-Info.plist` or `google-services.json`\n * file is configured.\n *\n * You can use this method to initialize additional Firebase app instances. You should typically not\n * initialize the default Firebase with custom options, as the default app is tightly coupled\n * with the google-services config that is shipped with the app.\n *\n * @param {FirebaseOption} [options] - Firebase configuration options\n * @param {string} [name] - Name of the firebase-app (when omitted the default name is used)\n * @return {Promise<FirebaseApp>} - Firebase app\n */\nexport async function initializeAppAsync(\n  options?: FirebaseOptions,\n  name?: string\n): Promise<FirebaseApp> {\n  // @ts-ignore\n  if (!ExpoFirebaseApp.initializeAppAsync) {\n    throw new UnavailabilityError('expo-firebase-app', 'initializeAppAsync');\n  }\n  const result = await ExpoFirebaseApp.initializeAppAsync(options, name);\n  return new FirebaseApp(result);\n}\n\n/**\n * Retrieves a Firebase app instance.\n * When called with no arguments, the default app is returned. When an app name is provided,\n * the app corresponding to that name is returned. An exception is thrown if the app being\n * retrieved has not yet been initialized.\n *\n * @param {string} name - Optional name of the app\n * @return {Promise<FirebaseApp>} - Firebase app\n */\nexport async function getAppAsync(name?: string): Promise<FirebaseApp> {\n  // @ts-ignore\n  if (!ExpoFirebaseApp.getAppAsync) {\n    throw new UnavailabilityError('expo-firebase-app', 'getAppAsync');\n  }\n  const result = await ExpoFirebaseApp.getAppAsync(name);\n  return new FirebaseApp(result);\n}\n\n/**\n * Retrieves all initialized Firebase app instances.\n *\n * @return {Promise<FirebaseApp[]>} - Array of firebase apps\n */\nexport async function getAppsAsync(): Promise<FirebaseApp[]> {\n  // @ts-ignore\n  if (!ExpoFirebaseApp.getAppsAsync) {\n    throw new UnavailabilityError('expo-firebase-app', 'getAppsAsync');\n  }\n  // @ts-ignore\n  const results = await ExpoFirebaseApp.getAppsAsync();\n  return results.map(result => new FirebaseApp(result));\n}\n\n/**\n * Deletes a Firebase app by its name.\n *\n * @internal\n * This function is provided for testing purposes, more specifically\n * to test forbidden access to the prohibited default app.\n */\nexport async function deleteAppAsync(name: string): Promise<void> {\n  // @ts-ignore\n  if (!ExpoFirebaseApp.deleteAppAsync) {\n    throw new UnavailabilityError('expo-firebase-app', 'deleteAppAsync');\n  }\n  await ExpoFirebaseApp.deleteAppAsync(name);\n}\n\n/**\n * Register a native module.\n *\n * @internal\n * This function is used by the other `expo-firebase-` modules to register\n * themselves with the main expo firebase namespace.\n */\nexport function registerModule(name: FirebaseModuleName, mod: any) {\n  const func: any = (app?: any) => {\n    const mod = FirebaseModules.getModule(name);\n    //if (!mod) throw new Error(`Firebase module not available: ${name}`);\n    return mod(app ? app.name : DEFAULT_NAME);\n  };\n\n  // hoist statics\n  Object.keys(mod).forEach(key => {\n    func[key] = mod[key];\n  });\n\n  return FirebaseModules.setModule(name, func);\n}\n"]}